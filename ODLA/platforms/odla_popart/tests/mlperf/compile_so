#!/bin/bash
#mkdir -p build
#g++ model.cc -I/home/jackz/repos/HALO/ODLA/include -fPIC -c -o build/model.o
#g++ -shared -fPIC -o build/model.so build/model.o model.bin -L/home/jackz/repos/HALO/build/lib \
#    -lodla_popart -L/home/jackz/repos/cnpy/build -lcnpy -lz -Wl,-rpath=/home/jackz/repos/HALO/build/lib -lpthread

g++ ../common.cc -I/home/jackz/repos/HALO/ODLA/include -I../ -c -o build/common.o -g
g++ ../call_by_dlopen.cc -Ibuild -I/home/jackz/repos/HALO/ODLA/include -I./ -c -o build/run_so.o -g
#g++ build/run_so.o build/common.o -o build/run_so -ldl
g++ -o build/run_so build/run_so.o build/common.o -L/home/jackz/repos/HALO/build/lib \
    -lodla_popart -L/home/jackz/repos/cnpy/build -lcnpy -lz -Wl,-rpath=/home/jackz/repos/HALO/build/lib -lpthread -ldl -g